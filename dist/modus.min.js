!function(e){"undefined"!=typeof __root?e(__root):"object"==typeof module&&"object"==typeof module.exports?(e(exports),module.exports=exports.modus):"undefined"!=typeof window&&e(window)}(function(e){"use strict";function t(){var e=document.getElementsByTagName("script"),t=e[e.length-1];if(t){var n=t.getAttribute("data-main");n&&_.start(n)}}var n=e.UID||0,o=function(){return n+=1},i=function(e){if("object"!=typeof e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},r=function(e){return null==e?0:e.length===+e.length?e.length:i(e).length},u=function(e,t){if(!t)return e;for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n]);return t},s=function(e){return l(Array.prototype.slice.call(arguments,1),function(t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e},a=function(e,t){return Function.prototype.bind&&e.bind?e.bind(t):function(){e.apply(t,arguments)}},l=function(e,t,n){if(!e)return e;if(n=n||e,Array.prototype.forEach&&e.forEach)e.forEach(t);else if(e instanceof Array)for(var o=0;o<e.length&&(!e[o]||!t.call(n,e[o],o,e));o+=1);else for(var i in e)if(e.hasOwnProperty(i)&&i&&t.call(n,e[i],i,e))break;return e},d=Array.prototype.indexOf,c=function(e,t){if(d&&e.indexOf===d)return e.indexOf(t);var n=-1;return l(e,function(e,o){e===t&&(n=o)}),n},f=(Array.prototype.filter,function(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&c(t,o)<0&&(n[o]=e[o]);return n}),p=function(){var t=[],n=function(e,n){return n&&e.bind(n),t.push(e)},o=function(){var e=t,n=0,o=t.length;for(t=[];o>n;)e[n++]()};if("function"==typeof setImmediate)return function(e,t){n(e,t)&&setImmediate(o)};if("undefined"!=typeof process&&"function"==typeof process.nextTick)return function(e,t){n(e,t)&&process.nextTick(o)};if("undefined"==typeof window||window.ActiveXObject||!window.postMessage)return function(e,t){n(e,t)&&setTimeout(o)};var i="tic!"+new Date,r=function(e){e.data===i&&(e.stopPropagation&&e.stopPropagation(),o())};return e.addEventListener("message",r,!0),function(t,o){n(t,o)&&e.postMessage(i,"*")}}(),h=function(e){var t=this,n=!1,o=[],i=[],r=null,u=function(e,t,n){if(e.length){r=t||r,n=n||this;for(var o;o=e.pop();)o.call(n,r)}},s=function(e,i){t=i||t,n=1,u(o,e,i)},a=function(e,o){t=o||t,n=-1,u(i,e,o)};return e&&e(s,a),{then:function(e,u){return p(function(){e&&"function"==typeof e&&(1===n?e.call(t,r):o.push(e)),u&&"function"==typeof u&&(-1===n?u.call(t,r):i.push(u))}),this},fail:function(e){return this.then(null,e)},resolve:s,reject:a}},m=function(e,t,n){n=n||this;var o=r(e);return h(function(i,r){l(e,function(e){h(function(o,i){t.call(n,e,o,i)}).then(function(){o-=1,0>=o&&i(null,n)}).fail(function(e){r(e)})})})},g=function(e){return e.indexOf("/")>=0},y=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},M=function(t,n){var o=e[t];n.noConflict=function(){return e[t]=o,n},e[t]=n},v=function(){function t(e,n,o){var i=this;e instanceof Array?l(e,function(e){t.call(i,e,n,!0)}):"object"==typeof e?l(e,function(e,t){i[e]=n.hasOwnProperty(t)?n[t]:null}):i[e]=o?n.hasOwnProperty(e)?n[e]:null:n.hasOwnProperty("default")?n["default"]:f(n,v)}function n(e,t){"string"==typeof e?p(a(t.enableModule,t)):B=t}var o={},i=o.Loader=function(){this._visited={}},r=function(e){throw e},d=null;i.getInstance=function(){return d||(d=new i),d},i.prototype.getVisit=function(e){return this._visited[e]||!1},i.prototype.addVisit=function(e,t){return this._visited[e]=h(t),this._visited[e]},i.prototype.newScript=function(e,t){var n=document.createElement("script");return n.type="text/javascript",n.charset="utf-8",n.async=!0,n.setAttribute("data-module",e),n.src=t,n},i.prototype.insertScript=function(e,t){var n=document.getElementsByTagName("head")[0]||document.documentElement;if(n.insertBefore(e,n.firstChild).parentNode,t){var o=!1;e.onload=e.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,t(),e.onload=e.onreadystatechange=null)}}},i.prototype.load=function(e,t,n){t=t||function(){},n=n||r;var i,u=this;return i=e instanceof Array?m(e,function(e,t,n){u.load(e).then(t,n)}):o.isBuilding&&this.loadBuilding?this.loadBuilding(e):P()?this.loadServer(e):this.loadClient(e),t&&i.then(t,n),i},i.prototype.loadClient=function(e){var t,n=this,i=F(e),r=this.getVisit(i);return r||(t=this.newScript(e,i),r=this.addVisit(i,function(i){n.insertScript(t,function(){var t=o.getLastModule();t&&t.registerModule(e),i()})})),r},i.prototype.loadServer=function(e){var t=F(e),n=this.getVisit(t);return n||(n=this.addVisit(t,function(n,i){try{require("./"+t);var r=o.getLastModule();r&&r.registerModule(e),n()}catch(u){i(u)}})),n};var M=o.Module=function(e,t,n){"string"!=typeof e&&e!==!1&&(t=e,e=!1),this.__modulePromise=h(),this.__moduleDependencies=[],this.__moduleName="",this.__moduleFactory=null,this.__moduleMeta=u({throwErrors:!0,isAsync:!1,isAmd:!1,isDisabled:!1,isEnabled:!1,isEnabling:!1,isAnon:!0},n),this.setModuleFactory(t),this.registerModule(e)},v=["__moduleName","__moduleFactory","__modulePromise","__moduleMeta","__moduleDependencies"];M.prototype.from=function(e){var n=this;return e=D(e,this.getModuleName()),{imports:function(){var i=Array.prototype.slice.call(arguments,0),r=[];if(r=i[0]instanceof Array?i[0]:r.concat(i),o.moduleExists(e)){var u=o.getModule(e);t.call(n,r,u,!1)}}}},M.prototype.imports=function(e){var n,i,r,u=this;if("object"==typeof e)for(var s in e)i=s,alais=e[s];else i=e,n=e.split(".").pop();var a=this[n];return e=D(i,this.getModuleName()),o.moduleExists(e)&&(r=o.getModule(e),t.call(u,n,r,!1)),{as:function(e){u[n]=a,r&&t.call(u,e,r,!1)}}},M.prototype.require=function(e){e=D(e,this.getModuleName());var t={};if(o.moduleExists(e)){var n=o.getModule(e);t=n.hasOwnProperty("default")?n["default"]:f(n,v)}return t},M.prototype.registerModule=function(e){this.getModuleMeta("isAnon")&&e&&(this.setModuleMeta("isAnon",!1),this.__moduleName=D(e)),this.getModuleMeta("isAnon")||o.addModule(this.getModuleName(),this)},M.prototype.getModuleMeta=function(e){return e?this.__moduleMeta[e]||!1:this.__moduleMeta},M.prototype.setModuleMeta=function(e,t){this.__moduleMeta[e]=t},M.prototype.onModuleReady=function(e,t){return arguments.length&&this.__modulePromise.then(e,t),this.__modulePromise},M.prototype.getModuleName=function(){return this.__moduleName},M.prototype.addModuleDependency=function(e){var t=this;return e instanceof Array?void l(e,function(e){t.addModuleDependency(e)}):(e=D(e,this.getModuleName()),this.__moduleDependencies.push(e),e)},M.prototype.getModuleDependencies=function(){return this.__moduleDependencies||[]};var _=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,b=[/(?:[^\.'"\(\)]+)\.from\(\s*["']([^'"\s]+)["']\s*\)/g,/(?:[^\.'"\(\)]+)\.imports\(\s*["']([^'"\s]+)["']\s*\)/g,/require\s*\(\s*["']([^'"\s]+)["']\s*\)/g];M.prototype.findModuleDependencies=function(){if(this.__moduleFactory){var e=this,t=this.__moduleFactory.toString().replace(_,"");l(b,function(n){t.replace(n,function(t,n){e.addModuleDependency(n)})})}},M.prototype.setModuleFactory=function(e){if(e){if("function"!=typeof e){var t=e;e=this.getModuleMeta("isAmd")?function(){return t}:function(){this["default"]=t}}e.length>=2&&!this.getModuleMeta("isAmd")&&this.setModuleMeta("isAsync",!0),this.__moduleFactory=e}},M.prototype.getModuleFactory=function(){return this.__moduleFactory||!1};var w=function(e,t,n){if(N(e)){var o=S(e);o.enableModule().then(t,n)}else n("Could not load dependency: "+e)},x=function(){if(this.__moduleFactory){var e=this;this.__moduleFactory.length<=1?this.__moduleFactory.call(this,this):this.__moduleFactory.call(this,this,function(t){t?e.__modulePromise.reject(t,e):e.__modulePromise.resolve(e,e)}),delete this.__moduleFactory}},A=function(){if(this.__moduleFactory){var e=this,t=this.getModuleDependencies(),n=[],o=!1,i={exports:{}};l(t,function(t){if("exports"===t)n.push(i.exports),o=!0;else if("module"===t)n.push(i),o=!0;else if("require"===t)n.push(a(e.require,e));else if(t=D(t),N(t)){var r=S(t);n.push(r.hasOwnProperty("default")?r["default"]:r)}}),o?this.__moduleFactory.apply(this,n):i.exports=this.__moduleFactory.apply(this,n)||{},"function"==typeof i.exports&&(i.exports["default"]=i.exports),s(this,i.exports),delete this.__moduleFactory}};M.prototype.enableModule=function(){if(this.getModuleMeta("isDisabled")||this.getModuleMeta("isEnabling")||this.getModuleMeta("isEnabled"))return this.__modulePromise;var e=this,t=o.Loader.getInstance(),n=[],i=function(){e.setModuleMeta("isEnabling",!1),e.setModuleMeta("isEnabled",!0),o.isBuilding||(e.getModuleMeta("isAmd")?A.call(e):x.call(e)),e.getModuleMeta("isAsync")||e.__modulePromise.resolve(null,e)};return this.setModuleMeta("isEnabling",!0),this.findModuleDependencies(),n=this.getModuleDependencies(),n.length<=0?(i(),this.__modulePromise):(m(n,function(n,o,i){e.getModuleMeta("isAmd")&&c(["exports","require","module"],n)>=0?o():N(n)?w(n,o,i):N(n)?w(n,o,i):t.load(n).then(function(){w(n,o,i)},i)}).then(i,a(this.disableModule,this)),this.__modulePromise)},M.prototype.disableModule=function(e){if(this.setModuleMeta("isDisabled",!0),this.__modulePromise.reject(e),this.getModuleMeta("throwErrors")&&e instanceof Error)throw e;if(this.getModuleMeta("throwErrors"))throw new Error(e);return e},o.env={},o.options={root:"",maps:{},namespaceMaps:{},main:"main",modusfile:!1},o.noConflict=function(){return e.modus=_previousModus,o},o.config=function(e,t){if("object"!=typeof e)return 0===arguments.length?o.options:arguments.length<2?"undefined"==typeof o.options[e]?!1:o.options[e]:"maps"===e?o.map(t):"namespaceMaps"===e?o.mapNamespace(t):(o.options[e]=t,o.options[e]);for(var n in e)o.config(n,e[n])};{var E=function(){"object"==typeof module&&module.exports?o.config("environment","node"):o.config("environment","client")},P=o.isServer=function(){return o.config("environment")||E(),"node"===o.config("environment")||"server"===o.config("environment")};o.isClient=function(){return o.config("environment")||E(),"node"!=o.config("environment")&&"server"!=o.config("environment")}}o.map=function(e,t,n){if(n=n||{},"object"!=typeof e)"namespaces"===n.type?o.options.namespaceMaps[e]=t:o.options.maps[e]=t;else for(var i in e)o.map(i,e[i],n)},o.mapNamespace=function(e,t){o.map(e,t,{type:"namespaces"})};{var O=function(e){var t=o.config("namespaceMaps");return l(t,function(t,n){var o=RegExp(y(n),"g"),i=t.replace(/\/|\\/g,".");e=e.replace(o,i)}),e},j=function(e){var t=o.config("maps");return t[e]?t[e]:e},F=o.getMappedPath=function(e,t){t=u({ext:"js",root:o.config("root")},t);var n=j(e);return n=O(n),g(n)||"."!==n.charAt("0")||(n=n.substring(1)),n=g(n)?n:n.replace(/\./g,"/"),n="js"===t.ext?n.indexOf(".js")<0&&!P()?t.root+n+".js":t.root+n:t.root+n+"."+t.ext},D=o.normalizeModuleName=function(e,t){if(t=t||"",g(e)&&(e=e.replace(/\b\.js\b/g,""),0===e.indexOf("../")&&(e="../"+e),e=e.replace(/\.\.\//g,"."),0===e.indexOf("./")&&(e=e.replace("./","."))),e=e.replace(/\/|\\/g,"."),"."===e.charAt(0)){var n=t.split("."),o=e.split(".");return l(o,function(e){e.length>0?n.push(e):n.pop()}),n.join(".")}return e},N=o.moduleExists=function(e){return e=D(e),o.env.hasOwnProperty(e)},S=o.getModule=function(e){return e?(e=D(e),o.env[e]||!1):o.env},B=(o.getAllModules=function(){return S()},o.addModule=function(e,t){if(!(t instanceof M))throw new TypeError("Must be a Module: "+typeof t);o.env[e]=t},null);o.getLastModule=function(){var e=B;return B=null,e}}o.module=function(e,t,o){o=o||{};var i=new M(e,t,o);return n(e,i),i},o.module.modus={},o.main=function(e,t){arguments.length>=2?o.config(e):t=e;var n=o.config("main")||"main";return o.module(n,t)},o.define=function(e,t,o){"string"!=typeof e&&(o=t,t=e,e=!1),t instanceof Array||(o=t,t=[]),"function"==typeof o&&0===t.length&&o.length>0&&(t=(1===o.length?["require"]:["require","exports","module"]).concat(t));var i=new M(e);return i.setModuleMeta("isAmd",!0),i.addModuleDependency(t),i.setModuleFactory(o),n(e,i),i},o.define.amd={jQuery:!0};var q={},C=[];return o.addBuildEvent=function(e,t){o.isBuilding&&("undefined"==typeof t&&(t=e,e=!1),e?(e=D(e),q[e]=t):C.push(t))},o.getBuildEvent=function(e){return e?q[e]||!1:C},o.start=function(e,t){e=o.normalizeModuleName(e);var n=e.lastIndexOf(".")+1,i=e.substring(0,n),r=e.substring(n),u=o.Loader.getInstance();o.config("root",i.replace(/\./g,"/")),o.config("main",r),u.load(r,t)},o},_=v();e.modus?M("modus"+o(),_):(M("modus",_),M("mod",_.module),M("module",_.module),M("define",_.define)),_.newContext=v,"undefined"!=typeof document&&t()});